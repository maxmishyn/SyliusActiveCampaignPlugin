imports:
    - { resource: "../../Behat/Resources/services.xml" }
    - { resource: "../../../vendor/sylius/sylius/src/Sylius/Behat/Resources/config/services.xml" }

# workaround needed for strange "test.client.history" problem
# see https://github.com/FriendsOfBehat/SymfonyExtension/issues/88
services:
    Symfony\Component\BrowserKit\AbstractBrowser: '@test.client'

    webgriffe.sylius_active_campaign_plugin.client.active_campaign.contact:
        class: Webgriffe\SyliusActiveCampaignPlugin\Client\ActiveCampaignResourceClient
        arguments:
            - '@test.http_client_stub'
            - '@serializer'
            - '@webgriffe.sylius_active_campaign_plugin.deserializer'
            - 'contact'
            - 'Webgriffe\SyliusActiveCampaignPlugin\ValueObject\Response\CreateContactResponse'
            - 'Webgriffe\SyliusActiveCampaignPlugin\ValueObject\Response\UpdateContactResponse'

    test.http_client_stub:
        class: 'Tests\Webgriffe\SyliusActiveCampaignPlugin\Stub\HttpClientStub'
